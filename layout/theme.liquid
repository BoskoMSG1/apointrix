<!doctype html>
<html class="no-js" lang="{{ request.locale.iso_code }}">
<head>
  <!-- ============================================
       APOINTRIX v2.0.0
       Premium Next-Gen Design System
       ============================================ -->
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="{{ settings.color_primary }}">
  
  {%- if canonical_url != blank -%}
    <link rel="canonical" href="{{ canonical_url }}">
  {%- endif -%}

  {%- if settings.favicon != blank -%}
    <link rel="icon" type="image/png" href="{{ settings.favicon | img_url: '32x32' }}">
  {%- endif -%}

  <!-- Preconnect to required origins -->
  <link rel="preconnect" href="https://cdn.shopify.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Page Title -->
  <title>
    {{ page_title }}
    {%- if current_tags %} &ndash; tagged "{{ current_tags | join: ', ' }}"{% endif -%}
    {%- if current_page != 1 %} &ndash; Page {{ current_page }}{% endif -%}
    {%- unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}
  </title>

  <!-- Meta Description -->
  {% if page_description %}
    <meta name="description" content="{{ page_description | escape }}">
  {% endif %}

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ page_title | escape }}">
  {% if page_description %}
    <meta property="og:description" content="{{ page_description | escape }}">
  {% endif %}
  <meta property="og:url" content="{{ canonical_url }}">
  <meta property="og:site_name" content="{{ shop.name }}">
  {% if page_image %}
    <meta property="og:image" content="https:{{ page_image | img_url: '1200x1200' }}">
  {% endif %}

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ page_title | escape }}">
  {% if page_description %}
    <meta name="twitter:description" content="{{ page_description | escape }}">
  {% endif %}

  <!-- Premium Google Fonts - DM Sans & Clash Display Alternative -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">

  <!-- AOS - Animate On Scroll -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

  <!-- Theme Styles -->
  {{ 'appointly-reset.css' | asset_url | stylesheet_tag }}
  {{ 'appointly-variables.css' | asset_url | stylesheet_tag }}
  {{ 'appointly-global.css' | asset_url | stylesheet_tag }}
  {{ 'appointly-components.css' | asset_url | stylesheet_tag }}
  {{ 'appointly-utilities.css' | asset_url | stylesheet_tag }}

  <!-- Shopify Required -->
  {{ content_for_header }}

  <!-- Custom CSS from theme settings -->
  <style>
    :root {
      --color-primary: {{ settings.color_primary }};
      --color-secondary: {{ settings.color_secondary }};
      --color-text: {{ settings.color_text }};
      --color-background: {{ settings.color_background }};
    }
  </style>

  <!-- Schema.org Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "{{ shop.name }}",
    "url": "{{ shop.url }}",
    "logo": "{{ shop.logo | img_url: 'master' }}",
    "sameAs": [
      {% if settings.social_facebook != blank %}"{{ settings.social_facebook }}",{% endif %}
      {% if settings.social_instagram != blank %}"{{ settings.social_instagram }}",{% endif %}
      {% if settings.social_linkedin != blank %}"{{ settings.social_linkedin }}",{% endif %}
      {% if settings.social_twitter != blank %}"{{ settings.social_twitter }}"{% endif %}
    ]
  }
  </script>
</head>

<body class="template-{{ template.name }} {% if customer %}customer-logged-in{% endif %}">
  
  <!-- Skip to content (Accessibility) -->
  <a class="skip-to-content-link" href="#main-content">
    Skip to content
  </a>

  <!-- Site Header -->
  {% section 'header' %}

  <!-- Main Content -->
  <main id="main-content" role="main" tabindex="-1">
    {{ content_for_layout }}
  </main>

  <!-- Site Footer -->
  {% section 'footer' %}

  <!-- Back to Top Button -->
  <button id="back-to-top" class="back-to-top" aria-label="Back to top">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>

  <!-- AOS Init -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  
  <!-- Theme Scripts -->
  {{ 'appointly-global.js' | asset_url | script_tag }}

  <!-- Initialize -->
  <script>
    // Initialize AOS with enhanced settings
    AOS.init({
      duration: 1000,
      easing: 'ease-out-cubic',
      once: true,
      offset: 120,
      delay: 100,
      anchorPlacement: 'top-bottom',
      mirror: false,
      disable: false
    });

    // Premium Interactive Enhancements
    document.addEventListener('DOMContentLoaded', function() {
      // Smooth cursor interaction
      const interactiveElements = document.querySelectorAll('.btn, .card, a, button');

      interactiveElements.forEach(el => {
        el.addEventListener('mouseenter', function() {
          this.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
        });
      });

      // Parallax effect for mesh background
      let ticking = false;
      window.addEventListener('scroll', function() {
        if (!ticking) {
          window.requestAnimationFrame(function() {
            const scrolled = window.pageYOffset;
            const meshBg = document.querySelector('body::before');
            if (meshBg) {
              document.body.style.setProperty('--scroll-offset', scrolled * 0.5 + 'px');
            }
            ticking = false;
          });
          ticking = true;
        }
      });

      // Add micro-interactions to cards
      const cards = document.querySelectorAll('.card');
      cards.forEach(card => {
        card.addEventListener('mousemove', function(e) {
          const rect = this.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;

          const centerX = rect.width / 2;
          const centerY = rect.height / 2;

          const rotateX = (y - centerY) / 20;
          const rotateY = (centerX - x) / 20;

          this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-8px)`;
        });

        card.addEventListener('mouseleave', function() {
          this.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) translateY(0)';
        });
      });

      // Gradient text animation
      const gradientTexts = document.querySelectorAll('.text-gradient-vivid');
      gradientTexts.forEach(text => {
        text.style.backgroundSize = '200% auto';
      });
    });

    // Theme version
    console.log('âœ¨ Apointrix Premium v2.0.0 - Loaded');
    console.log('ðŸŽ¨ Next-Generation Design System Active');
  </script>

</body>
</html>
